<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <title>Carteirinha Estudantil</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    
    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      text-align: center;
      padding: 20px;
      background: #f0f2f5;
      min-height: 100vh;
    }
    
    .container {
      max-width: 850px;
      margin: 0 auto;
    }
    
    header {
      background: linear-gradient(135deg, #1a237e, #283593);
      color: white;
      padding: 25px;
      border-radius: 15px 15px 0 0;
      margin-bottom: 20px;
    }
    
    h1 {
      font-size: 2rem;
      margin-bottom: 10px;
    }
    
    .subtitle {
      font-size: 1.1rem;
      opacity: 0.9;
    }
    
    .card {
      background: white;
      border-radius: 15px;
      padding: 30px;
      margin-bottom: 20px;
      box-shadow: 0 10px 30px rgba(0,0,0,0.08);
    }
    
    .input-section {
      background: #f8f9fa;
      border-radius: 10px;
      padding: 20px;
      margin-bottom: 20px;
    }
    
    input {
      width: 100%;
      max-width: 400px;
      padding: 15px 20px;
      font-size: 18px;
      border: 2px solid #ddd;
      border-radius: 8px;
      margin: 10px 0;
      text-align: center;
      font-family: 'Courier New', monospace;
    }
    
    .buttons {
      display: flex;
      gap: 10px;
      justify-content: center;
      flex-wrap: wrap;
      margin: 20px 0;
    }
    
    button {
      padding: 12px 25px;
      font-size: 16px;
      font-weight: 600;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      transition: all 0.3s;
      min-width: 140px;
    }
    
    .btn-primary {
      background: #1a237e;
      color: white;
    }
    
    .btn-secondary {
      background: #37474f;
      color: white;
    }
    
    .btn-success {
      background: #2e7d32;
      color: white;
    }
    
    .btn-danger {
      background: #c62828;
      color: white;
    }
    
    button:hover {
      opacity: 0.9;
      transform: translateY(-2px);
    }
    
    .status-box {
      background: #e3f2fd;
      border-left: 4px solid #1a237e;
      padding: 15px;
      margin: 15px 0;
      border-radius: 8px;
      text-align: left;
      font-size: 14px;
      display: none;
    }
    
    .status-box.visible {
      display: block;
    }
    
    .canvas-container {
      position: relative;
      margin: 20px 0;
    }
    
    canvas {
      width: 100%;
      height: auto;
      border: 2px solid #e0e0e0;
      border-radius: 10px;
      background: white;
    }
    
    .debug-overlay {
      position: absolute;
      top: 10px;
      left: 10px;
      background: rgba(0,0,0,0.7);
      color: white;
      padding: 10px;
      border-radius: 5px;
      font-size: 12px;
      display: none;
      z-index: 100;
    }
    
    .image-info {
      background: #f5f5f5;
      padding: 15px;
      border-radius: 8px;
      margin: 10px 0;
      font-size: 14px;
      text-align: left;
    }
    
    .image-info.success {
      background: #e8f5e9;
      border-left: 4px solid #4caf50;
    }
    
    .image-info.error {
      background: #ffebee;
      border-left: 4px solid #f44336;
    }
    
    @media (max-width: 768px) {
      .container {
        padding: 10px;
      }
      
      header {
        padding: 20px 15px;
      }
      
      h1 {
        font-size: 1.5rem;
      }
      
      .card {
        padding: 20px;
      }
      
      button {
        width: 100%;
        max-width: 300px;
      }
    }
  </style>
</head>

<body>
  <div class="container">
    <header>
      <h1>üéì Carteirinha Estudantil</h1>
      <p class="subtitle">Sistema Digital de Identifica√ß√£o Estudantil</p>
    </header>
    
    <div class="card">
      <div class="input-section">
        <h3>Digite seu CPF para acessar:</h3>
        <input type="text" id="cpf" placeholder="000.000.000-00" maxlength="14">
        <p style="margin-top: 10px; color: #666; font-size: 14px;">
          CPFs de teste: <strong>123.456.789-09</strong> ou <strong>987.654.321-00</strong>
        </p>
      </div>
      
      <div class="buttons">
        <button class="btn-primary" onclick="gerarCarteirinha()">Gerar Carteirinha</button>
        <button class="btn-secondary" onclick="testarImagens()">Testar Imagens</button>
        <button class="btn-success" onclick="limparTudo()">Limpar</button>
        <button class="btn-danger" onclick="debugAvancado()">Debug Avan√ßado</button>
      </div>
      
      <div class="status-box" id="statusBox"></div>
      
      <div class="image-info" id="imageInfo"></div>
    </div>
    
    <div class="card">
      <h3>Frente da Carteirinha</h3>
      <div class="canvas-container">
        <div class="debug-overlay" id="debugFrente"></div>
        <canvas id="frente" width="800" height="500"></canvas>
      </div>
    </div>
    
    <div class="card">
      <h3>Verso da Carteirinha</h3>
      <div class="canvas-container">
        <div class="debug-overlay" id="debugVerso"></div>
        <canvas id="verso" width="800" height="500"></canvas>
      </div>
    </div>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/js-sha256"></script>
  
  <script>
  // ============================================
  // CONFIGURA√á√ÉO E DADOS
  // ============================================
  const alunos = [
    {
      hash: "a8476735b37a541a38402a2e7037c79e2d217fe9780e5e34347156ef61eff42b",
      nome: "Aluno Teste",
      instituicao: "Est√°cio",
      curso: "Ensino M√©dio",
      matricula: "0001",
      cidade: "Anadia",
      turno: "Noturno",
      validade: "12/12/2026"
    },
    {
      hash: "4914e1b9960e6236dfaacbad1b30c7996074fe980c6d9ea49bb87f65a6fb14ef",
      nome: "Estelionat√°ria Souza",
      instituicao: "Ifal",
      curso: "Letras",
      matricula: "0002",
      cidade: "Anadia",
      turno: "Matutino",
      validade: "12/12/2026"
    }
  ];

  // ============================================
  // CONFIGURA√á√ÉO CORRIGIDA - CAMINHO DAS FOTOS
  // ============================================
  // CORRE√á√ÉO APLICADA: "Images" foi alterado para "Imagens"
  const CONFIG = {
    caminhoImagens: "./Imagens/",        // Pasta dos modelos
    caminhoFotos: "./Imagens/fotos/",    // Pasta das fotos (CORRIGIDO AQUI)
    
    // Placeholders para fallback
    placeholders: {
      frente: "https://via.placeholder.com/800x500/4a6fa5/ffffff?text=CARTEIRINHA+ESTUDANTIL",
      verso: "https://via.placeholder.com/800x500/2c3e50/ffffff?text=VERSO+DA+CARTEIRINHA",
      foto: (matricula) => `https://ui-avatars.com/api/?name=Aluno&background=4a6fa5&color=fff&size=256&bold=true&length=1`
    }
  };

  // ============================================
  // VARI√ÅVEIS GLOBAIS
  // ============================================
  const canvasFrente = document.getElementById('frente');
  const ctxFrente = canvasFrente.getContext('2d');
  const canvasVerso = document.getElementById('verso');
  const ctxVerso = canvasVerso.getContext('2d');
  const statusBox = document.getElementById('statusBox');
  const imageInfo = document.getElementById('imageInfo');
  const debugFrente = document.getElementById('debugFrente');
  const debugVerso = document.getElementById('debugVerso');

  // ============================================
  // FUN√á√ïES DE UTILIDADE
  // ============================================
  function formatarCPF(cpf) {
    cpf = cpf.replace(/\D/g, '');
    if (cpf.length > 11) cpf = cpf.substring(0, 11);
    if (cpf.length > 9) {
      cpf = cpf.replace(/(\d{3})(\d{3})(\d{3})(\d{2})/, "$1.$2.$3-$4");
    } else if (cpf.length > 6) {
      cpf = cpf.replace(/(\d{3})(\d{3})(\d{1,3})/, "$1.$2.$3");
    } else if (cpf.length > 3) {
      cpf = cpf.replace(/(\d{3})(\d{1,3})/, "$1.$2");
    }
    return cpf;
  }

  function mostrarStatus(mensagem, tipo = 'info') {
    statusBox.textContent = mensagem;
    statusBox.className = 'status-box visible';
    
    if (tipo === 'error') {
      statusBox.style.borderLeftColor = '#f44336';
      statusBox.style.background = '#ffebee';
    } else if (tipo === 'success') {
      statusBox.style.borderLeftColor = '#4caf50';
      statusBox.style.background = '#e8f5e9';
    } else {
      statusBox.style.borderLeftColor = '#1a237e';
      statusBox.style.background = '#e3f2fd';
    }
  }

  function mostrarInfoImagens(mensagem, sucesso) {
    imageInfo.textContent = mensagem;
    imageInfo.className = sucesso ? 'image-info success' : 'image-info error';
  }

  // ============================================
  // VERIFICA√á√ÉO DAS IMAGENS
  // ============================================
  async function verificarImagensExistem() {
    console.log('üîç Verificando exist√™ncia das imagens...');
    
    const pathsToCheck = [
      { name: 'modelo-frente.png', paths: ['./Imagens/modelo-frente.png'] },
      { name: 'modelo-verso.png', paths: ['./Imagens/modelo-verso.png'] },
      { name: 'foto-0001.jpg', paths: ['./Imagens/fotos/0001.jpg'] },
      { name: 'foto-0002.jpg', paths: ['./Imagens/fotos/0002.jpg'] }
    ];
    
    let resultados = [];
    
    for (const item of pathsToCheck) {
      for (const path of item.paths) {
        const existe = await verificarArquivoExiste(path);
        if (existe) {
          resultados.push({ nome: item.name, caminho: path, existe: true });
          break;
        }
      }
      if (!resultados.find(r => r.nome === item.name)) {
        resultados.push({ nome: item.name, caminho: item.paths[0], existe: false });
      }
    }
    
    return resultados;
  }

  function verificarArquivoExiste(url) {
    return new Promise((resolve) => {
      const xhr = new XMLHttpRequest();
      xhr.open('HEAD', url, true);
      xhr.onreadystatechange = function() {
        if (xhr.readyState === 4) {
          resolve(xhr.status === 200);
        }
      };
      xhr.onerror = () => resolve(false);
      xhr.timeout = 5000;
      xhr.ontimeout = () => resolve(false);
      xhr.send();
    });
  }

  // ============================================
  // FUN√á√ÉO PRINCIPAL - CARREGAR IMAGEM
  // ============================================
  function carregarImagemComDetalhes(url, tipo) {
    return new Promise((resolve) => {
      console.log(`üîÑ Tentando carregar: ${url}`);
      
      const img = new Image();
      img.crossOrigin = 'anonymous';
      
      img.onload = function() {
        console.log(`‚úÖ Imagem carregada: ${url} (${img.width}x${img.height})`);
        resolve({
          sucesso: true,
          imagem: img,
          url: url,
          largura: img.width,
          altura: img.height,
          tipo: tipo
        });
      };
      
      img.onerror = function(e) {
        console.error(`‚ùå Falha ao carregar: ${url}`, e);
        resolve({
          sucesso: false,
          imagem: null,
          url: url,
          erro: e,
          tipo: tipo
        });
      };
      
      // For√ßa recarregamento evitando cache
      const timestamp = new Date().getTime();
      const urlUnica = `${url}${url.includes('?') ? '&' : '?'}_=${timestamp}`;
      img.src = urlUnica;
    });
  }

  // ============================================
  // DESENHO DA CARTEIRINHA
  // ============================================
  function desenharFrenteBasica(ctx, aluno, fundo = null, foto = null) {
    const largura = ctx.canvas.width;
    const altura = ctx.canvas.height;
    
    // Limpa tudo
    ctx.clearRect(0, 0, largura, altura);
    
    // Desenha fundo ou cria um
    if (fundo && fundo.sucesso) {
      ctx.drawImage(fundo.imagem, 0, 0, largura, altura);
      debugFrente.innerHTML = `‚úÖ Fundo: ${fundo.largura}x${fundo.altura}`;
      debugFrente.style.display = 'block';
    } else {
      // Fundo personalizado
      const grad = ctx.createLinearGradient(0, 0, largura, 0);
      grad.addColorStop(0, '#1a237e');
      grad.addColorStop(0.5, '#283593');
      grad.addColorStop(1, '#3949ab');
      ctx.fillStyle = grad;
      ctx.fillRect(0, 0, largura, altura);
      
      ctx.fillStyle = 'white';
      ctx.font = 'bold 32px Arial';
      ctx.textAlign = 'center';
      ctx.fillText('CARTEIRINHA ESTUDANTIL', largura/2, 60);
      ctx.textAlign = 'left';
      
      debugFrente.innerHTML = `‚ö†Ô∏è Sem imagem<br>Criado: ${largura}x${altura}`;
      debugFrente.style.display = 'block';
    }
    
    // √Årea da foto
    const fotoX = 50;
    const fotoY = 120;
    const fotoW = 200;
    const fotoH = 240;
    
    // Moldura da foto
    ctx.fillStyle = 'rgba(255, 255, 255, 0.9)';
    ctx.fillRect(fotoX, fotoY, fotoW, fotoH);
    
    ctx.strokeStyle = '#1a237e';
    ctx.lineWidth = 3;
    ctx.strokeRect(fotoX, fotoY, fotoW, fotoH);
    
    // Foto do aluno ou placeholder
    if (foto && foto.sucesso) {
      try {
        // Calcula propor√ß√µes para manter aspect ratio
        const scale = Math.min(fotoW / foto.imagem.width, fotoH / foto.imagem.height);
        const scaledW = foto.imagem.width * scale;
        const scaledH = foto.imagem.height * scale;
        const offsetX = fotoX + (fotoW - scaledW) / 2;
        const offsetY = fotoY + (fotoH - scaledH) / 2;
        
        ctx.drawImage(foto.imagem, offsetX, offsetY, scaledW, scaledH);
      } catch (e) {
        console.error('Erro ao desenhar foto:', e);
        desenharPlaceholderFoto(ctx, fotoX, fotoY, fotoW, fotoH, aluno.matricula);
      }
    } else {
      desenharPlaceholderFoto(ctx, fotoX, fotoY, fotoW, fotoH, aluno.matricula);
    }
    
    // Dados do aluno
    ctx.fillStyle = '#000';
    ctx.font = 'bold 26px Arial';
    ctx.fillText(aluno.nome, 280, 140);
    
    ctx.font = '20px Arial';
    ctx.fillText(`Institui√ß√£o: ${aluno.instituicao}`, 280, 190);
    ctx.fillText(`Curso: ${aluno.curso}`, 280, 230);
    ctx.fillText(`Cidade: ${aluno.cidade}`, 280, 270);
    ctx.fillText(`Turno: ${aluno.turno}`, 280, 310);
    ctx.fillText(`Validade: ${aluno.validade}`, 280, 350);
    
    // Matr√≠cula
    ctx.save();
    ctx.translate(30, 250);
    ctx.rotate(-Math.PI / 2);
    ctx.font = 'bold 22px Arial';
    ctx.fillStyle = '#1a237e';
    ctx.fillText(`MATR√çCULA: ${aluno.matricula}`, 0, 0);
    ctx.restore();
    
    // QR Code simulado
    ctx.fillStyle = '#333';
    ctx.fillRect(600, 120, 150, 150);
    ctx.fillStyle = '#fff';
    ctx.font = 'bold 16px Arial';
    ctx.textAlign = 'center';
    ctx.fillText('QR CODE', 675, 195);
    ctx.fillText('DIGITAL', 675, 220);
    ctx.textAlign = 'left';
    
    // Rodap√©
    ctx.fillStyle = 'rgba(0, 0, 0, 0.7)';
    ctx.font = '14px Arial';
    ctx.textAlign = 'center';
    ctx.fillText(`Gerado em: ${new Date().toLocaleDateString()}`, largura/2, altura - 20);
    ctx.textAlign = 'left';
  }

  function desenharVersoBasico(ctx, fundo = null) {
    const largura = ctx.canvas.width;
    const altura = ctx.canvas.height;
    
    ctx.clearRect(0, 0, largura, altura);
    
    if (fundo && fundo.sucesso) {
      ctx.drawImage(fundo.imagem, 0, 0, largura, altura);
      debugVerso.innerHTML = `‚úÖ Fundo: ${fundo.largura}x${fundo.altura}`;
      debugVerso.style.display = 'block';
    } else {
      // Fundo personalizado para verso
      const grad = ctx.createLinearGradient(0, 0, 0, altura);
      grad.addColorStop(0, '#37474f');
      grad.addColorStop(1, '#263238');
      ctx.fillStyle = grad;
      ctx.fillRect(0, 0, largura, altura);
      
      ctx.fillStyle = 'white';
      ctx.font = 'bold 28px Arial';
      ctx.textAlign = 'center';
      ctx.fillText('VERSO DA CARTEIRINHA', largura/2, 80);
      
      debugVerso.innerHTML = `‚ö†Ô∏è Sem imagem<br>Criado: ${largura}x${altura}`;
      debugVerso.style.display = 'block';
    }
    
    // Informa√ß√µes
    ctx.fillStyle = 'rgba(255, 255, 255, 0.9)';
    ctx.font = '18px Arial';
    ctx.textAlign = 'left';
    
    const infos = [
      '‚úì Documento oficial v√°lido nacionalmente',
      '‚úì Em caso de perda, comunicar √† institui√ß√£o',
      '‚úì Uso pessoal e intransfer√≠vel',
      '‚úì Apresentar junto com documento com foto',
      '‚úì N√£o dobrar, molhar ou expor ao calor excessivo'
    ];
    
    infos.forEach((info, index) => {
      ctx.fillText(info, 100, 150 + (index * 40));
    });
    
    // C√≥digo de barras simulado
    ctx.fillStyle = '#000';
    for (let i = 0; i < 50; i++) {
      const alturaBarra = 20 + Math.random() * 30;
      const larguraBarra = 5;
      ctx.fillRect(100 + (i * 10), 400, larguraBarra, alturaBarra);
    }
    
    ctx.font = '16px Arial';
    ctx.textAlign = 'center';
    ctx.fillText('ID: ' + Math.random().toString(36).substr(2, 10).toUpperCase(), largura/2, 480);
  }

  function desenharPlaceholderFoto(ctx, x, y, w, h, matricula) {
    // Fundo
    const grad = ctx.createRadialGradient(x + w/2, y + h/2, 0, x + w/2, y + h/2, w/2);
    grad.addColorStop(0, '#5c6bc0');
    grad.addColorStop(1, '#3949ab');
    ctx.fillStyle = grad;
    ctx.fillRect(x, y, w, h);
    
    // √çcone de usu√°rio
    ctx.fillStyle = 'white';
    ctx.font = 'bold 60px Arial';
    ctx.textAlign = 'center';
    ctx.textBaseline = 'middle';
    ctx.fillText('üë§', x + w/2, y + h/2 - 20);
    
    // Matr√≠cula
    ctx.font = '20px Arial';
    ctx.fillText(matricula, x + w/2, y + h/2 + 40);
    ctx.textAlign = 'left';
    ctx.textBaseline = 'alphabetic';
  }

  // ============================================
  // FUN√á√ÉO PRINCIPAL - GERAR CARTEIRINHA
  // ============================================
  async function gerarCarteirinha() {
    const cpfInput = document.getElementById('cpf');
    let cpf = cpfInput.value.replace(/\D/g, '');
    
    if (cpf.length !== 11) {
      mostrarStatus('Por favor, digite um CPF v√°lido (11 n√∫meros)', 'error');
      cpfInput.value = formatarCPF(cpf);
      cpfInput.focus();
      return;
    }
    
    mostrarStatus('Processando... Aguarde.', 'info');
    
    try {
      // Atualiza formata√ß√£o
      cpfInput.value = formatarCPF(cpf);
      
      // Gera hash e busca aluno
      const hash = sha256(cpf);
      const aluno = alunos.find(a => a.hash === hash);
      
      if (!aluno) {
        mostrarStatus('Aluno n√£o encontrado. Verifique o CPF.', 'error');
        return;
      }
      
      mostrarStatus(`Carregando dados de: ${aluno.nome}`, 'info');
      
      // Primeiro verifica se as imagens existem
      const verificacao = await verificarImagensExistem();
      console.log('Resultado da verifica√ß√£o:', verificacao);
      
      // Tenta carregar as imagens - CORRE√á√ÉO APLICADA AQUI TAMB√âM
      const [frenteResult, versoResult, fotoResult] = await Promise.all([
        carregarImagemComDetalhes(CONFIG.caminhoImagens + 'modelo-frente.png', 'frente'),
        carregarImagemComDetalhes(CONFIG.caminhoImagens + 'modelo-verso.png', 'verso'),
        carregarImagemComDetalhes(CONFIG.caminhoFotos + aluno.matricula + '.jpg', 'foto')
      ]);
      
      // Mostra informa√ß√µes detalhadas
      let infoMsg = '';
      infoMsg += frenteResult.sucesso ? '‚úÖ Modelo frente carregado\n' : '‚ùå Modelo frente n√£o encontrado\n';
      infoMsg += versoResult.sucesso ? '‚úÖ Modelo verso carregado\n' : '‚ùå Modelo verso n√£o encontrado\n';
      infoMsg += fotoResult.sucesso ? '‚úÖ Foto carregada\n' : '‚ùå Foto n√£o encontrado\n';
      
      mostrarInfoImagens(infoMsg, frenteResult.sucesso || versoResult.sucesso || fotoResult.sucesso);
      
      // Desenha as carteirinhas
      desenharFrenteBasica(ctxFrente, aluno, frenteResult, fotoResult);
      desenharVersoBasico(ctxVerso, versoResult);
      
      mostrarStatus(`‚úÖ Carteirinha gerada para: ${aluno.nome}`, 'success');
      
    } catch (error) {
      console.error('Erro cr√≠tico:', error);
      mostrarStatus('Erro ao processar. Tente novamente.', 'error');
    }
  }

  // ============================================
  // FUN√á√ïES ADICIONAIS
  // ============================================
  async function testarImagens() {
    mostrarStatus('Testando acesso √†s imagens...', 'info');
    
    const resultados = await verificarImagensExistem();
    
    let mensagem = 'üìä Resultado do teste:\n\n';
    let todasExistem = true;
    
    resultados.forEach(item => {
      if (item.existe) {
        mensagem += `‚úÖ ${item.nome}: ENCONTRADO\n   Caminho: ${item.caminho}\n\n`;
      } else {
        mensagem += `‚ùå ${item.nome}: N√ÉO ENCONTRADO\n   Tentado: ${item.caminho}\n\n`;
        todasExistem = false;
      }
    });
    
    mostrarInfoImagens(mensagem, todasExistem);
    mostrarStatus(todasExistem ? '‚úÖ Todas as imagens foram encontradas!' : '‚ö†Ô∏è Algumas imagens n√£o foram encontradas', 
                  todasExistem ? 'success' : 'error');
  }

  function limparTudo() {
    ctxFrente.clearRect(0, 0, canvasFrente.width, canvasFrente.height);
    ctxVerso.clearRect(0, 0, canvasVerso.width, canvasVerso.height);
    debugFrente.style.display = 'none';
    debugVerso.style.display = 'none';
    statusBox.classList.remove('visible');
    imageInfo.textContent = '';
    document.getElementById('cpf').value = '';
    mostrarStatus('Sistema limpo. Digite um CPF para come√ßar.', 'info');
  }

  function debugAvancado() {
    console.clear();
    console.group('=== DEBUG AVAN√áADO ===');
    console.log('URL da p√°gina:', window.location.href);
    console.log('User Agent:', navigator.userAgent);
    console.log('Canvas suportado:', !!canvasFrente.getContext);
    console.log('Alunos cadastrados:', alunos.length);
    console.log('Dimens√µes canvas:', {
      frente: `${canvasFrente.width}x${canvasFrente.height}`,
      verso: `${canvasVerso.width}x${canvasVerso.height}`
    });
    
    // Testa URLs diretamente
    const testUrls = [
      CONFIG.caminhoImagens + 'modelo-frente.png',
      CONFIG.caminhoImagens + 'modelo-verso.png',
      CONFIG.caminhoFotos + '0001.jpg',
      CONFIG.caminhoFotos + '0002.jpg'
    ];
    
    testUrls.forEach(url => {
      const img = new Image();
      img.onload = () => console.log(`‚úÖ ${url} - OK (${img.width}x${img.height})`);
      img.onerror = () => console.log(`‚ùå ${url} - FALHA`);
      img.src = url + '?debug=' + Date.now();
    });
    
    console.groupEnd();
    
    mostrarStatus('Debug executado. Verifique o console (F12).', 'info');
  }

  // ============================================
  // INICIALIZA√á√ÉO
  // ============================================
  document.addEventListener('DOMContentLoaded', function() {
    console.log('üéì Sistema de Carteirinha iniciado');
    console.log('üìç URL:', window.location.href);
    console.log('üîß Configura√ß√£o:', CONFIG); // Log da configura√ß√£o corrigida
    
    // Configura input
    const cpfInput = document.getElementById('cpf');
    cpfInput.addEventListener('input', function() {
      this.value = formatarCPF(this.value);
    });
    
    cpfInput.addEventListener('keypress', function(e) {
      if (e.key === 'Enter') {
        gerarCarteirinha();
      }
    });
    
    // Testa automaticamente ao carregar
    setTimeout(() => {
      mostrarStatus('Sistema pronto. Digite um CPF para gerar sua carteirinha.', 'info');
    }, 500);
  });
  </script>
</body>
</html>
